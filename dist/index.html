<html>
    <head>

        <script src="js/env3d.js"></script>
         
        <script type="text/javascript">

         function Cube() {
             this.x = 5;
             this.y = 1;
             this.z = 1;
             this.frame = 0;
             this.rotateX = -90;
             this.scale = 0.1;

             //this.texture = "models/cube/cube.png";
             //this.model = "models/cube/cube.obj";
             //this.model = "models/tux/tux.obj";

             this.texture = null;
             this.mtl = "models/testobj/obj.mtl";
             this.model = "models/testobj/tinker.obj";
             
             this.move = function() {
                 this.y = Math.abs(Math.sin(this.frame)) + 1;
                 this.frame+=0.1;
                 this.rotateY += 0.1;
             }
         }
         
         window.addEventListener('load', function() {

             var env = new env3d.Env();

             // Lighting is required for mtl files to work
             var ambient = new THREE.AmbientLight( 0x444444 ); 
             env.scene.add( ambient );
             
             var light = new THREE.DirectionalLight( 0xffeedd);
             light.position.set( -4, -4, -4 ).normalize();
             env.scene.add( light );
             
             
             window['env'] = env;
             console.log(env);
             
             env.setRoom({
                 textureNorth: "textures/floor.png",
                 textureTop: null,
                 width: 20,
                 height: 20,
                 depth: 2
             });
             
             env.addObject(new Cube());

             env.addObject({
                 x: 5,
                 y: 3,
                 z: 1,
                 rotateY: 0
             });
             env.start();
             env.setCameraXYZ(5,5,25);
             env.setSky('textures/skybox/default');
             //env.setBackgroundVideo('https://env3d.github.io/env3d-js/dist/textures/pano.webm');
             //env.setBackgroundVideo('https://yanwsh.github.io/videojs-panorama/assets/shark.mp4');
             //env.setBackgroundVideo('http://media.agency.discovery.com/encoded/discovery-vr/hearing-colors_HD.mp4');
             //env.setBackgroundVideo('http://media.agency.discovery.com/encoded/discovery-vr/dvr-an-introduction_r2_hd.mp4');
             //env.setBackgroundVideo('http://media.agency.discovery.com/encoded/discovery-vr/gillette-roller-coaster_mobi.mp4');
             //env.initVRController();
             
             console.log(env.gameObjects);
             env.loop = function() {                
                 var object = env.getPick(env.getMouseX(), env.getMouseY());
                 if (object) {
                     object.rotateY += 1;
                 }
             };


         });

         
        </script>
        <style>
         body {
             margin: 0;
             padding: 0;
         }
        </style>
    </head>
    <body>
        <div id="env3d"></div>
    </body>
</html>
